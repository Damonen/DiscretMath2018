<!Doctype html>

<html>
	<head>
		<title>
			Lab#1
		</title>
		<meta charset="utf-8">
	</head>
	<body>
		<style>
			.hide {
				display: none;
			}
		</style>
		<script>
			function sumA(ar1, ar2){
				var res1 = new Array();
				res1 = res1.concat(ar1);
				for(var i = 0; i < ar2.length; i++){
					var inn = true;
					for(var ii = 0; ii < ar1.length; ii++){
						if(ar2[i] == ar1[ii]){
							inn = false;
						}
					}
					if(inn){
						res1.push(ar2[i]);
					}
				}
				return res1
			}
		
			function crossA(ar1, ar2){	
				var res = new Array();
				for(var i = 0; i < ar2.length; i++){
					var inn = false;
					for(var ii = 0; ii < ar1.length; ii++){
						if(ar2[i] == ar1[ii]){
							inn = true;
						}
					}
					if(inn){
						res.push(ar2[i]);
					}
				}
				return res;
			}
			
			function minusA(ar1, ar2){
				for(var i = 0; i < ar2.length; i++){
					var inn = true;
					for(var ii = 0; ii < ar1.length; ii++){
						if(ar2[i] == ar1[ii]){
							inn = false;
						}
					}
					if(inn){
						return "Дополнение невозможно";
					}
				}
			
				for(var i = 0; i < ar1.length; i++){
					for(var ii = 0; ii < ar2.length; ii++){
						if(ar1[i] == ar2[ii]){
							ar1.splice(i, 1);
						}
					}
				}
				return ar1;
			}
			
			function Check(arr){
				for(var i = 0; i < arr.length; i++){
					if(arr[i].length != 3){
						return false;
					} else if(!(arr[i].match(/[a-z]\d[a-z]/i))){
						return false;
					}
				}
				return true;
			}
			
			function inn(idd){
				var mass1 = document.getElementById("mass1").value.split(";");
				var mass2 = document.getElementById("mass2").value.split(";");
				var aV1 = Check(mass1);
				var aV2 = Check(mass2);
				if (!(aV1 && aV2)){
					[].forEach.call(document.getElementsByClassName("button2"), function(elem, i, arrr){
						elem.classList.add("hide");
					});
					if(aV1){
						document.getElementById("out").innerHTML = "First mass valid<br>";
					} else {
						document.getElementById("out").innerHTML = "First mass invalid<br>";
					}
					if(aV2){
						document.getElementById("out").innerHTML += "Second mass valid<br>";
					} else {
						document.getElementById("out").innerHTML += "Second mass invalid<br>";
					}
				} else {
					[].forEach.call(document.getElementsByClassName("button2"), function(elem, i, arrr){
						elem.classList.remove("hide");
					});
					document.getElementById("out").innerHTML = "";
					if(idd.id == "1"){
						document.getElementById("out").innerHTML = "<br>Объединение множеств = " + sumA(mass1, mass2);
					}
					if(idd.id == "2"){
						document.getElementById("out").innerHTML = "<br>Пересечение множеств = " + crossA(mass1, mass2);
					}
					if(idd.id == "3"){
						document.getElementById("out").innerHTML = "<br>Симметрическая разность = " + minusA(sumA(mass1, mass2), crossA(mass1, mass2));
					}
					if(idd.id == "4"){
						if (mass1.length > mass2.length){
							document.getElementById("out").innerHTML = "<br>Дополнение = " + minusA(mass1, mass2);
						} else {
							document.getElementById("out").innerHTML = "<br>Дополнение = " + minusA(mass2, mass1);
						}
					}
				}
				document.getElementById("inf").innerHTML = "<br>" + mass1;
				document.getElementById("inf").innerHTML += "<br>" + mass2;
				
			}
		</script>
		<form>
			Mass #1<br>
			<input type="text" id="mass1" value="q1q;q2q;q3q"/><br>
			Mass #2<br>
			<input type="text" id="mass2" value="q3q;q4q"/><br><br>
			<input id="0" type="button" value="Проверить" onclick="inn(this)"/><br>
			<div id="inf"></div><br>
			<input id="1" class="button2 hide" type="button" value="Объединение" onclick="inn(this)"/>
			<input id="2" class="button2 hide" type="button" value="Пересечение" onclick="inn(this)"/>
			<input id="3" class="button2 hide" type="button" value="Симметрическая разность" onclick="inn(this)"/>
			<input id="4" class="button2 hide" type="button" value="Дополнение" onclick="inn(this)"/>
		</form>
		
		
		<div id="out"></div>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</body>
</html>